<!DOCTYPE html>
<html lang="{{ site.lang | default: " en-US" }}">

<head>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  <link rel="stylesheet" type="text/css" href="{{ '/assets/css/print.css' | relative_url }}" media="print">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  <style>
    #centeringDiv {
      margin: auto;
      max-width: 1200px;
    }
    #navDiv
    {
      display: block;
      box-sizing: border-box;
      padding-top: 5px;
      padding-bottom: 5px;
      border-bottom-width: 3px;
      border-bottom-style: solid;
      border-bottom-color: #F0F0F0;
    }
    #navDiv nav li::after
    {
      content: "/";
      padding-left: 10px;
      padding-right: 0px;
      color: #808080;
    }
    #navDiv nav li
    {
      display:inline;
      padding-left: 10px;
      padding-right: 0px;
    }
    #tocColumn {
      width: 350px;
      position: fixed;
      overflow-y: auto;
      box-sizing: border-box;
      max-height: 100vh;
      display: block;
    }

    #tocInner {
      padding: 20px;
    }

    #rightColumn {
      padding-left: 390px;
      padding-right: 40px;
      padding-top: 20px;
    }

    .toc_root_list {
      list-style-type: none;
      list-style-position: outside;
      background-color: initial;
      padding-left: 0px;
    }
    .toc_list {
        padding-left: 16px;
        background-color: initial;
        list-style-type: none;
        margin-bottom: 0px;
    }
    .toc_item {
        cursor: pointer;
        user-select: none;
        list-style-type: none;
        padding-left: 0px;
        padding-top: 5px;
    }
    .toc_item_expanded::before {
        content: "\25be";
        cursor: pointer;
    }
    .toc_item_collapsed::before {
        content: "\25b8";
        cursor: pointer;
    }
    .toc_item_leaf {
        padding-left: 14px;
        cursor: pointer;
        list-style-type: none;
    }
    .toc_span:hover
    {
      color: #3030BE
    }
    #btnToggleTOC {
      display: none;
      width: fit-content;
      margin-left: 10px;
      margin-top: 10px;
      padding: 10px;
      border-style: solid;
      border-color: #808080;
      border-width: 1px;
    }
    @media screen and (max-width: 900px) {
      #tocColumn {
        width: 300px;
        display: block;
      }
      #rightColumn {
        padding-left: 320px;
        padding-right: 20px;
      }
    }

    @media screen and (max-width: 700px) {
      #tocColumn {
        width: 100%;
        position: static;
        display: none;
        border-right-style: none;
      }
      #tocInner {
        padding: 10px;
      }
      #rightColumn {
        padding-left: 10px;
        padding-right: 10px;
      }
      #centeringDiv {
         padding-left: 0px;
      }
      #btnToggleTOC {
        display: block;
      }
    }
  </style>
  {% seo %}
</head>

<body>
  <div id="centeringDiv">
    <div id="navDiv">
    {% include_relative nav.html %}
    </div>
    <button id="btnToggleTOC" onclick="toggleTOC()">Table of Contents</button>
    <div id="tocColumn">
      <div id="tocInner">
        {% include_relative toc.html %}
      </div>
    </div>
    <div id="rightColumn">
        <section id="main_content">
          {% include anchor_headings.html html=content anchorBody="" %}
        </section>
        <a href="javascript:;" id="_content_end_"></a>
        <footer>
          {% if site.github.is_project_page %}
          {{ site.title | default: site.github.repository_name }} is maintained by <a
            href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a><br>
          {% endif %}
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>
      </div>
    </div>
  <script>
    var tocColumn = document.getElementById("tocColumn");
    var rightColumn = document.getElementById("rightColumn");
    function updateScroll()
    {
      if (window.innerWidth < 700)
      {
        tocColumn.style.height = "";
        return;
      }
      var top = Math.max(0, rightColumn.getBoundingClientRect().top);
      tocColumn.style.top = top + "px";
      tocColumn.style.height = (window.innerHeight-top) + "px";
    }
    function updatePosition()
    {
      if (window.innerWidth > 700)
        tocColumn.style.display = "";
      tocColumn.style.left = rightColumn.getBoundingClientRect().left + "px";
      updateScroll();
    }
    window.addEventListener("resize", updatePosition);
    updatePosition();

    var tocItemsArray = [];
    var subSectionItems = [];
    var selectedItem = null;
    function toggleTOC() {
      var tocColumn = document.getElementById("tocColumn");
      if (tocColumn.style.display == "block")
        tocColumn.style.display = "none";
      else
        tocColumn.style.display = "block";
      event.stopPropagation();
    }
    function expandItem(e) {
      if (e == selectedItem)
        e.style["font-weight"] = "bold";
      var childList = e.getElementsByClassName("toc_list");
      if (childList.length == 0)
        return;
      childList[0].style.display = "block";
      childList[0].style["font-weight"] = "normal";
      e.setAttribute("class", "toc_item toc_item_expanded");
    }
    function collapseItem(e) {
      var childList = e.getElementsByClassName("toc_list");
      if (childList.length == 0)
        return;
      childList[0].style.display = "none";
      e.setAttribute("class", "toc_item toc_item_collapsed");
    }
    function tocSpanOnClick(e)
    {
      if (event.srcElement != null && event.srcElement.parentElement != null)
      {
        var link = event.srcElement.parentElement.getAttribute("data-link");
        if (link != null)
        {
          var poundIndex = link.indexOf("#");
          if (poundIndex == -1)
            window.location.href = link + ".html";
          else
            window.location.href = link.substr(0, poundIndex) + ".html#" + link.substr(poundIndex+1, link.length - poundIndex - 1);
        }
      }
      event.stopPropagation();
    }
    function tocItemOnClick(e)
    {
      if (event.srcElement == null) return;
      // Toggle expanded/collapsed state.
      if (event.srcElement.getAttribute("class").endsWith("toc_item_collapsed"))
        expandItem(event.srcElement);
      else if (event.srcElement.getAttribute("class").endsWith("toc_item_expanded"))
        collapseItem(event.srcElement);
      event.stopPropagation();
    }
    var path = window.location.pathname;
    var pageName = path.split("/").pop();
    var currentPageID = pageName.substr(0, pageName.lastIndexOf("."));
    if (currentPageID.length == 0)
      currentPageID = "index";
    var tocLists = document.getElementsByClassName("toc_root_list");
    for (var i = 0; i < tocLists.length; i++) {
      var tocList = tocLists[i];
      var items = tocList.getElementsByTagName("li")
      for (var j = 0; j < items.length; j++)
        tocItemsArray.push(items[j]);
    }
    for (var i = 0; i < tocItemsArray.length; i++) {
      var item = tocItemsArray[i];
      if (item.getAttribute("data-link") == currentPageID)
        selectedItem = item;
      if (item.getElementsByTagName("li").length != 0) {
        collapseItem(item);
      }
      else {
        item.setAttribute("class", "toc_item toc_item_leaf");
      }
      item.addEventListener("click", tocItemOnClick);
      var innerSpan = item.getElementsByTagName("span");
      if (innerSpan.length != 0)
      {
        innerSpan[0].addEventListener("click", tocSpanOnClick);
        innerSpan[0].setAttribute("class", "toc_span");
      }
    }
    var curItem = selectedItem;
    while (curItem != null) {
      expandItem(curItem);
      curItem = curItem.parentElement;
      if (curItem != null && curItem.getAttribute("class") != null &&
        curItem.getAttribute("class").startsWith("toc_list"))
        curItem = curItem.parentElement;
      if (curItem != null && curItem.getAttribute("class") != null &&
        curItem.getAttribute("class").startsWith("toc_root_list"))
        break;
    }

    var subItems = selectedItem.getElementsByTagName("li");
    var subSectionTitles = [];
    var subSectionTitleStrs = [];
    for (var i = 0; i < subItems.length; i++)
    {
      subSectionItems.push(subItems[i]);
      var title = subItems[i].getAttribute("data-link");
      var pos = title.lastIndexOf("#");
      title = title.substr(pos + 1);
      var element = document.getElementById(title);
      subSectionTitles.push(element);
      subSectionTitleStrs.push(title);
    }
    subSectionTitles.push(document.getElementById("_content_end_"));
    function isSectionFullyVisible(id)
    {
      var titleElement = subSectionTitles[id];
      var nextTitleElement = subSectionTitles[id+1];
      return (titleElement.getBoundingClientRect().top >= 0 && nextTitleElement.getBoundingClientRect().top <= window.innerHeight);
    }
    function findCurrentSubsection()
    {
      var currentSubsectionID = -1;
      for (var i = 0; i < subSectionItems.length; i++) {
        var titleElement = subSectionTitles[i];
        if (titleElement == null)
          continue;
        if (titleElement.getBoundingClientRect().top < window.innerHeight * 0.12)
          currentSubsectionID = i;
      }
      return currentSubsectionID;
    }
    function updateCurrentSubsection(currentSubsectionID)
    {
      for (var i = 0; i < subSectionItems.length; i++)
      {
        if (i == currentSubsectionID || isSectionFullyVisible(i))
          subSectionItems[i].getElementsByTagName("span")[0].style["font-weight"] = 600;
        else
          subSectionItems[i].getElementsByTagName("span")[0].style["font-weight"] = 400;
      }
    }
    function windowScroll(e)
    {
      updateCurrentSubsection(findCurrentSubsection());
      updateScroll();
    }
    window.addEventListener("scroll", windowScroll);
    updateCurrentSubsection(findCurrentSubsection());
  </script>

  {% if site.google_analytics %}
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', '{{ site.google_analytics }}', 'auto');
    ga('send', 'pageview');
  </script>
  {% endif %}
</body>

</html>